<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>cells-iconset-svg test</title>
  <script src="../node_modules/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>
  <script src="../node_modules/mocha/mocha.js"></script>
  <script src="../node_modules/wct-mocha/wct-mocha.js"></script>
  <script src="../node_modules/chai/chai.js"></script>
  <script src="../node_modules/sinon/pkg/sinon.js"></script>
  <script src="../node_modules/@polymer/test-fixture/test-fixture.js"></script>
  <script src="../node_modules/sinon-chai/lib/sinon-chai.js"></script>
</head>

<body>

  <test-fixture id="default">
    <template>
      <cells-iconset-svg name="foo">
        <circle id="circle" cx="20" cy="20" r="10"></circle>
        <symbol id="rect" viewBox="0 0 50 25" mirror-in-rtl>
          <rect x="0" y="0" width="50" height="25"></rect>
        </symbol>
      </cells-iconset-svg>
    </template>
  </test-fixture>

  <script type="module">
    import { CellsIronMeta, } from './test.js';
    suite('cells-iconset-svg', () => {
      let el;
      let meta;
      let loadedPromise;

      setup(() => {
        loadedPromise = new Promise(function(resolve) {
          window.addEventListener('iron-iconset-added', function(ev) {
            if (ev && ev.detail === el) {
              resolve();
            }
          });
        });
        el = fixture('default');
        meta = new CellsIronMeta({ type: 'iconset', });
      });

      test('it can be accessed via iron-meta', () => {
        expect(meta.byKey('foo')).to.be.equal(meta.list[0]);
      });

      test('it does not have a size', function() {
        const rect = el.getBoundingClientRect();
        expect(rect.width).to.be.equal(0);
        expect(rect.height).to.be.equal(0);
      });

      test('it fires an iron-iconset-added event on the window', function() {
        return loadedPromise;
      });
    });
  </script>
</body>

</html>
