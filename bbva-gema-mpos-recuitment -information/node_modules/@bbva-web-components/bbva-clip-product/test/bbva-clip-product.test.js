import { html, fixture, assert, fixtureCleanup } from '@open-wc/testing';

import '../bbva-clip-product.js';

suite('bbva-clip-product', () => {
  let el;

  teardown(() => fixtureCleanup());

  suite('default', () => {
    setup(async () => {
      el = await fixture(
        html`
          <bbva-clip-product item="card">Card</bbva-clip-product>
        `,
      );
      await el.updateComplete;
    });

    test('a11y', function() {
      return assert.isAccessible(el);
    });

    test('SHADOW DOM - Structure test', () => {
      assert.shadowDom.equalSnapshot(el);
    });
  });

  suite('minimum with clip box', () => {
    setup(async () => {
      el = await fixture(
        html`
          <bbva-clip-product user-text="María Cid">Cuenta de María Cid</bbva-clip-product>
        `,
      );
      await el.updateComplete;
    });

    test('SHADOW DOM - Structure test', () => {
      assert.shadowDom.equalSnapshot(el);
    });
  });

  suite('Minimum with account', () => {
    setup(async () => {
      el = await fixture(
        html`
          <bbva-clip-product item="account">Account</bbva-clip-product>
        `,
      );
      await el.updateComplete;
    });

    test('a11y', function() {
      return assert.isAccessible(el);
    });

    test('SHADOW DOM - Structure test', () => {
      assert.shadowDom.equalSnapshot(el);
    });
  });

  suite('Maximum with account and clip box', () => {
    teardown(() => fixtureCleanup());
    setup(async () => {
      el = await fixture(
        html`
          <bbva-clip-product variant="maximum" item="account" user-text-right="Loli Martín"
            >Account of Loli Martín</bbva-clip-product
          >
        `,
      );
      await el.updateComplete;
    });

    test('a11y', function() {
      return assert.isAccessible(el);
    });

    test('SHADOW DOM - Structure test', () => {
      assert.shadowDom.equalSnapshot(el);
    });

    test('SHADOW DOM with item right', async () => {
      el.itemRight = 'card';
      await el.updateComplete;
      assert.shadowDom.equalSnapshot(el);
    });
  });

  suite('maximum with image and account', () => {
    teardown(() => fixtureCleanup());
    setup(async () => {
      el = await fixture(
        html`
          <bbva-clip-product variant="maximum" item-right="account" user-image="images/avatar.png"
            >Account of Jose Luis</bbva-clip-product
          >
        `,
      );
      await el.updateComplete;
    });

    test('a11y', function() {
      return assert.isAccessible(el);
    });

    test('SHADOW DOM - Structure test', () => {
      assert.shadowDom.equalSnapshot(el);
    });
  });

  suite('maximum with card and account', () => {
    teardown(() => fixtureCleanup());
    setup(async () => {
      el = await fixture(
        html`
          <bbva-clip-product variant="maximum" item-right="account" item="card"
            >Account of Jose Luis</bbva-clip-product
          >
        `,
      );
      await el.updateComplete;
    });

    test('a11y', function() {
      return assert.isAccessible(el);
    });

    test('SHADOW DOM - Structure test', () => {
      assert.shadowDom.equalSnapshot(el);
    });
  });
});
