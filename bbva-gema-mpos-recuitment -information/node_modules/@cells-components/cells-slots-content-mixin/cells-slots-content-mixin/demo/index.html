<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>cells-slots-content-mixin demo</title>
  <script src="../build/webcomponents-loader.js"></script>
  <script src="../build/scoping-shim.min.js"></script>
  <script src="../build/apply-shim.min.js"></script>
  <script src="../build/custom-style-interface.min.js"></script>
  <script>
    {
      const _customElementsDefine = window.customElements.define;
      window.customElements.define = (name, cl, conf) => {
        if (!customElements.get(name)) {
          _customElementsDefine.call(window.customElements, name, cl, conf);
        } else {
          console.warn(`${name} has been defined twice`);
        }
      };
    }
  </script>
  <script defer src="../build/component.js"></script>
  <script type="module" crossorigin="use-credentials">
    import '../build/demo-build.js';
  </script>
</head>

<body>
  <cells-demo-helper events='["slotschanges"]' breakpoints='{
        "mobile": { "width": 320, "height": 320, "name": "Slot" }}'>
    <cells-demo-case heading="Basic" description="Default specs">
      <template>
        <slot-element>
          <p>sdfas</p>
          <p>2jfie</p>
          <p>ramd5</p>
          <p>domep</p>
        </slot-element>
        <div class="actions">
          <bbva-button-default id="add">Add item</bbva-button-default>
          <bbva-button-default id="remove">Remove item</bbva-button-default>
        </div>
        <script type="module">
          const { LitElement, html, CellsSlotsContentMixin, contentSlots, } = window.DemoHelpers;
          const element = document.querySelector('slot-element');
          function generate_random_string(string_length) {
            let random_string = '';
            let random_ascii;
            for (let i = 0; i < string_length; i++) {
              random_ascii = Math.floor((Math.random() * 25) + 97);
              random_string += String.fromCharCode(random_ascii)
            }
            return random_string
          }
          document.getElementById('add').addEventListener('click', () => {
            const elementChildrenLength = element.children.length + 1;
            const newElementP = document.createElement('p');
            newElementP.textContent = generate_random_string(5);
            element.appendChild(newElementP);
          });

          document.getElementById('remove').addEventListener('click', () => {
            element.removeChild(element.children[element.children.length - 1]);
          });
          class slotElement extends CellsSlotsContentMixin(LitElement) {
            static get properties() {
              return {
                propSlot: {
                  type: Boolean,
                  reflect: true
                },
                textDetail: {
                  type: String,
                }
              };
            }
            constructor() {
              super();
              this.propSlot = false;
              this.addEventListener('slotschanges', (event) => {
                event.stopPropagation();
                event.preventDefault();
                console.info(event.detail);
                this.propSlot = true;
                this.textDetail = event.detail.contentSlots.length;
              });

            }

            render() {
              return html`
              <p><strong>contentSlots: </strong> ${this.textDetail}</p>
              <hr>
              <slot></slot>
          `;
            }
          }
          customElements.define('slot-element', slotElement);

        </script>
      </template>
    </cells-demo-case>
  </cells-demo-helper>
</body>

</html>
