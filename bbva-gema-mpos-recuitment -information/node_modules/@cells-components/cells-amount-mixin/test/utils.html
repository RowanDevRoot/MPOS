<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <script src="../node_modules/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>
  <script src="../node_modules/mocha/mocha.js"></script>
  <script src="../node_modules/wct-mocha/wct-mocha.js"></script>
  <script src="../node_modules/chai/chai.js"></script>
  <script src="../node_modules/sinon/pkg/sinon.js"></script>
  <script src="../node_modules/@polymer/test-fixture/test-fixture.js"></script>
  <script src="../node_modules/sinon-chai/lib/sinon-chai.js"></script>
</head>

<body>
  <script type="module">
    import * as amountUtilities from './test.js';

    suite('Amount Utilities', () => {

      test(`getGroupChars with matching lang returns correct character`, () => {
        const expected = '.';
        const language = 'es';
        const result = amountUtilities.getGroupChars(language);
        assert.equal(result, expected);
      });

      test(`getGroupChars with partially matching lang returns correct character`, () => {
        const expected = '.';
        const language = 'es-xx';
        const result = amountUtilities.getGroupChars(language);
        assert.equal(result, expected);
      });

      test(`getSeparator with matching lang returns correct character`, () => {
        const expected = ',';
        const language = 'es';
        const result = amountUtilities.getSeparator(language);
        assert.equal(result, expected);
      });

      test(`getSeparator with partially matching lang returns correct character`, () => {
        const expected = ',';
        const language = 'es-xx';
        const result = amountUtilities.getSeparator(language);
        assert.equal(result, expected);
      });

      test(`getCurrencyAsSymbol with matching localCurrency & currencyCode returns correct symbol`, () => {
        const expected = '$';
        const localCurrency = 'EUR';
        const currencyCode = 'USD';
        const result = amountUtilities.getCurrencyAsSymbol(localCurrency, currencyCode);
        assert.equal(result, expected);
      });

      test(`getCurrencyAsSymbol with non-matching localCurrency returns default symbol for currencyCode`, () => {
        const expected = 'US$';
        const localCurrency = 'XXX';
        const currencyCode = 'USD';
        const result = amountUtilities.getCurrencyAsSymbol(localCurrency, currencyCode);
        assert.equal(result, expected);
      });

      test(`getCurrencyAsSymbol with non-matching currencyCode returns currencyCode`, () => {
        const expected = 'XXX';
        const localCurrency = 'EUR';
        const currencyCode = 'XXX';
        const result = amountUtilities.getCurrencyAsSymbol(localCurrency, currencyCode);
        assert.equal(result, expected);
      });

      test(`hasDecimalPart for currencyCode not in currenciesWithoutDecimals returns false`, () => {
        const expected = false;
        const currencyCode = 'PYG';
        const result = amountUtilities.hasDecimalPart(currencyCode);
        assert.equal(result, expected);
      });

      test(`hasDecimalPart for currencyCode in currenciesWithoutDecimals returns true`, () => {
        const expected = true;
        const currencyCode = 'XXX';
        const result = amountUtilities.hasDecimalPart(currencyCode);
        assert.equal(result, expected);
      });

      test(`isRightAligned for currencyCode in rightAlignedCurrencies returns true`, () => {
        const expected = true;
        const currencyCode = 'EUR';
        const result = amountUtilities.isRightAligned(currencyCode);
        assert.equal(result, expected);
      });

      test(`isRightAligned for currencyCode not in rightAlignedCurrencies returns false`, () => {
        const expected = false;
        const currencyCode = 'XXX';
        const result = amountUtilities.isRightAligned(currencyCode);
        assert.equal(result, expected);
      });

      test(`hasMinusAfterSymbol for localCurrency in minusAfterSymbolLocalCurrencies returns true`, () => {
        const expected = true;
        const localCurrency = 'PYG';
        const result = amountUtilities.hasMinusAfterSymbol(localCurrency);
        assert.equal(result, expected);
      });

      test(`hasMinusAfterSymbol for localCurrency in minusAfterSymbolLocalCurrencies returns true`, () => {
        const expected = false;
        const localCurrency = 'XXX';
        const result = amountUtilities.hasMinusAfterSymbol(localCurrency);
        assert.equal(result, expected);
      });

      test(`getAbsAmount returns positive number`, () => {
        const expected = 12345.67;
        const amount = -12345.67;
        const result = amountUtilities.getAbsAmount(amount);
        assert.equal(result, expected);
      });

      test(`getIntegerAmount returns number without fractional part`, () => {
        const expected = 12345;
        const amount = 12345.67;
        const result = amountUtilities.getIntegerAmount(amount);
        assert.equal(result, expected);
      });

      test(`getIntegerAbsAmount returns positive number without fractional part`, () => {
        const expected = 12345;
        const amount = -12345.67;
        const result = amountUtilities.getIntegerAbsAmount(amount);
        assert.equal(result, expected);
      });

      test(`getGroupedIntegerString returns grouped number string`, () => {
        const expected = '1.234.567';
        const amount = 1234567;
        const groupChar = '.';
        const result = amountUtilities.getGroupedIntegerString(amount, groupChar);
        assert.equal(result, expected);
      });

      test(`getGroupedIntegerAbsString returns grouped positive number string without fractional part`, () => {
        const expected = '1.234.567';
        const amount = -1234567.89;
        const groupChar = '.';
        const result = amountUtilities.getGroupedIntegerAbsString(amount, groupChar);
        assert.equal(result, expected);
      });

      test(`getFractionalAmount returns fractional part of amount`, () => {
        const expected = 0.67;
        const amount = 12345.67;
        const result = amountUtilities.getFractionalAmount(amount);
        assert.equal(result, expected);
      });

      test(`amountStringToNumber returns number from grouped string amount`, () => {
        const expected = -1234567.89;
        const amount = '-1.234.567,89';
        const groupChar = '.';
        const decimalPart = ',';
        const result = amountUtilities.amountStringToNumber(amount, groupChar, decimalPart);
        assert.equal(result, expected);
      });
    });
  </script>
</body>

</html>
