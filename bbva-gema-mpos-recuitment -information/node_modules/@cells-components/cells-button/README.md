![LitElement component](https://img.shields.io/badge/litElement-component-blue.svg)

# \<cells-button>

`CellsButton` provides a base class as well as a `<cells-button>` custom element with button functionality as close as possible to native buttons. It provides an easier and convenient way to build buttons with encapsulated HTML & custom styles. As it almost does not provide any styles, it's specially aimed to be extended.

As native buttons, it can communicate with forms in the same document using standard form attributes, as well as use roles & aria attributes (for example, aria-expanded). It can receive any valid 'type' for buttons ('submit', 'button' or 'reset'), a 'disabled' state, and receive an 'autofocus' attribute to get focus when component is attached to the document.

`CellsButton` is heavily based on [weightless.dev button](https://weightless.dev/elements/button) for the form communication, and on [Vaadin Button](https://vaadin.com/components/vaadin-button) for the active state management.

When extending from `CellsButton`, just make sure to:
- Call `CellsButton` styles using `super.styles`
- Add a `<slot>` in render
- Use `this._button` getter in render to enable communication with native forms.

**Example**
```js
// Extending CellsButton to create a CustomButton element
class CustomButton extends CellsButton {
  static get properties() {
    return {
      // Additional properties here
    };
  }

  static get styles() { // be sure to get styles from upper class using super
    return [
      super.styles,
      styles,
      getComponentSharedStyles('custom-button-shared-styles')
    ];
  }

  render() { // include any HTML you need; for example, icons
    return html`
      <slot></slot>
      ${this._button}
    `;
  }
}
customElements.define('custom-button', CustomButton)
```

```html
<custom-button>This is a button</custom-button>
<custom-button disabled>This is a disabled button</custom-button>
<custom-button @click="${this._onClick}">This is a button inside another LitElement with click listener</custom-button>
<custom-button role="switch" aria-expanded="true">Button with role and arias</custom-button>
```

## FocusVisible mixin

`CellsButton` uses `FocusVisible mixin` from `@cells-components`. This means you can use the 'focus-visible' attribute on your component to manage ':focus' styles based on user navigation interface (keyboard/pointer).

```css
:host([focus-visible]) {
  /* Your focus styles */
}
```

## Form communication

To be able to communicate with **forms in the same document**, a component which extends from `CellsButton` must implement `_button` getter in its render method.
```js
  render() {
    return html`
      <slot></slot>
      ${this._button}
    `;
  }
```

This way, the component will be able to use the same attributes native buttons have to customize interaction with forms: 'name', 'value', 'form', 'formaction', 'formenctype', 'formmethod', 'formnovalidate' and 'formtarget'.

```html
<form action="formaction" method="get" target="_self">
  <custom-button value="buttonValue" name="customButtonName" formaction="differentaction" formmethod="post" formtarget="_blank">Submit button for form</custom-button>
</form>
```

## Caveats

### Click listeners previous to button definition

Setting a `CellsButton` as 'disabled' will prevent clicks on the button. This is true for mouse clicks, keyboard clicks, programmatic clicks or screen reader clicks. However, a disabled `CellsButton` won't prevent click listeners added **previously** to the customElement definition when the click is done programatically or through a screen reader.

### 'active' state

You can use the `:active` CSS pseudo-class to define styles for the button when it's being activated by the user using the mouse. However, this won't work when button is activated using the keyboard. `CellsButton` provides an `active` attribute which gets triggered on keydown and keyup with Spacebar/Enter, as well as with down and up mouse actions (touch or pointer).

```css
:host([active]) {
  ... Active styles ...
}
```

## Styling
The following custom properties are available for styling:

### Custom properties

| Selector          | CSS Property | CSS Variable                  | Theme Variable | Foundations/Fallback |
| ----------------- | ------------ | ----------------------------- | -------------- | -------------------- |
| :host([disabled]) | color        | --cells-button-disabled-color |                | rgba(0, 0, 0, 0.247) |
| :host             | color        | --cells-button-color          |                | rgba(0, 0, 0, 0.847) |
| :host             | border-color | --cells-button-border-color   |                | #d8d8d8              |

> Styling documentation generated by Cells CLI
