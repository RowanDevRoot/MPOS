<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>cells-button demo</title>
  <script src="../build/webcomponents-loader.js"></script>
  <script src="../build/scoping-shim.min.js"></script>
  <script src="../build/apply-shim.min.js"></script>
  <script src="../build/custom-style-interface.min.js"></script>
  <script>
    {
      const _customElementsDefine = window.customElements.define;
      window.customElements.define = (name, cl, conf) => {
        if (!customElements.get(name)) {
          _customElementsDefine.call(window.customElements, name, cl, conf);
        } else {
          console.warn(`${name} has been defined twice`);
        }
      };
    }
  </script>
  <script defer src="../build/component.js"></script>
  <script type="module" crossorigin="use-credentials">
    import '../build/demo-build.js';
  </script>

</head>

<body>
  <cells-demo-helper events='["demo-button-event"]'>
    <cells-demo-case heading="Basic">
      <template>
        <h2>cells-button</h2>
        <div>
          <cells-button>I'm a cells-button</cells-button>
        </div>
        <h2>native button</h2>
        <div>
          <button>I'm a native-button</button>
        </div>

      </template>
    </cells-demo-case>

    <cells-demo-case heading="Autofocus">
      <template>
        <div>
          <cells-button>No autofocus</cells-button>
        </div>
        <div>
          <cells-button autofocus>Autofocus</cells-button>
        </div>
        <div>
          <cells-button>No autofocus</cells-button>
        </div>

      </template>
    </cells-demo-case>

    <cells-demo-case heading="Listeners" description="cells-demo-helpers is listening for demo-button-event events">
      <template>
        <h2>cells-button</h2>
        <div>
          <cells-button id="cb1">Click</cells-button>
        </div>
        <div>
          <cells-button id="cb2">Focus</cells-button>
        </div>
        <div>
          <cells-button id="cb3">Blur</cells-button>
        </div>

        <h2>native button</h2>
        <div>
          <button id="b1">Click</button>
        </div>
        <div>
          <button id="b2">Focus</button>
        </div>
        <div>
          <button id="b3">Blur</button>
        </div>

        <script type="module">
          function fireDemoEvent(target, type) {
            document.dispatchEvent(new CustomEvent('demo-button-event', {
              bubbles: true,
              composed: true,
              detail: {
                target: target,
                type: type
              }
            }));
          }
          document.getElementById('cb1').addEventListener('click', () => fireDemoEvent('cells-button 1', 'click'));
          document.getElementById('cb2').addEventListener('focus', () => fireDemoEvent('cells-button 2', 'focus'));
          document.getElementById('cb3').addEventListener('blur', () => fireDemoEvent('cells-button 3', 'blur'));
          document.getElementById('b1').addEventListener('click', () => fireDemoEvent('button 1', 'click'));
          document.getElementById('b2').addEventListener('focus', () => fireDemoEvent('button 2', 'focus'));
          document.getElementById('b3').addEventListener('blur', () => fireDemoEvent('button 3', 'blur'));
        </script>

      </template>
    </cells-demo-case>

    <cells-demo-case heading="Disabled" description="cells-demo-helpers is listening for demo-button-event events">
      <template>
        <h2>cells-button</h2>
        <div>
          <cells-button id="cb1" disabled>Disabled with click</cells-button>
        </div>
        <div>
          <cells-button id="cb2" >Not disabled with click</cells-button>
        </div>

        <h2>native button</h2>
        <div>
          <button id="b1" disabled>Disabled with click</button>
        </div>
        <div>
          <button id="b2">Not disabled with click</button>
        </div>

        <script type="module">
          function fireDemoEvent(target, type) {
            document.dispatchEvent(new CustomEvent('demo-button-event', {
              bubbles: true,
              composed: true,
              detail: {
                target: target,
                type: type
              }
            }));
          }
          document.getElementById('cb1').addEventListener('click', () => fireDemoEvent('cells-button 1', 'click'));
          document.getElementById('cb2').addEventListener('click', () => fireDemoEvent('cells-button 2', 'click'));
          document.getElementById('b1').addEventListener('click', () => fireDemoEvent('button 1', 'click'));
          document.getElementById('b2').addEventListener('click', () => fireDemoEvent('button 2', 'click'));
        </script>

      </template>
    </cells-demo-case>

    <cells-demo-case heading="ARIA attributes" description="Use a screen-reader to check how the buttons are read aloud">
      <template>
        <h2>cells-button</h2>
        <div>
          <cells-button aria-label="Megabutton">With aria label</cells-button>
        </div>
        <div>
          <cells-button aria-labelledby="label1">With aria-labelledby</cells-button>
        </div>
        <div>
          <cells-button aria-describedby="desc1">With aria-describedby</cells-button>
        </div>
        <div>
          <cells-button aria-pressed="true">With aria-pressed true</cells-button>
        </div>
        <div>
          <cells-button aria-pressed="false">With aria-pressed false</cells-button>
        </div>
        <div>
          <cells-button aria-expanded="true">With aria-expanded true</cells-button>
        </div>
        <div>
          <cells-button aria-expanded="false">With aria-expanded false</cells-button>
        </div>
        <p id="label1" style="display: none;">I use aria-labelledby</p>
        <p id="desc1" style="display: none;">This is the text for aria describedby cells-button</p>

        <h2>native button</h2>
        <div>
          <button aria-label="Megabutton">With aria label</button>
        </div>
        <div>
          <button aria-labelledby="label2">With aria-labelledby</button>
        </div>
        <div>
          <button aria-describedby="desc2">With aria-describedby</button>
        </div>
        <div>
          <button aria-pressed="true">With aria-pressed true</button>
        </div>
        <div>
          <button aria-pressed="false">With aria-pressed false</button>
        </div>
        <div>
          <button aria-expanded="true">With aria-expanded true</button>
        </div>
        <div>
          <button aria-expanded="false">With aria-expanded false</button>
        </div>
        <p id="label2" style="display: none;">I use aria-labelledby</p>
        <p id="desc2" style="display: none;">This is the text for aria describedby cells-button</p>
      </template>
    </cells-demo-case>

    <cells-demo-case heading="Roles" description="Use a screen-reader to check how the buttons are read aloud">
      <template>
        <h2>cells-button</h2>
        <div>
          <cells-button role="switch">With role switch</cells-button>
        </div>
        <div>
          <cells-button role="link">With role link</cells-button>
        </div>

        <h2>native button</h2>
        <div>
          <button role="switch">With role switch</button>
        </div>
        <div>
          <button role="link">With role link</button>
        </div>
      </template>
    </cells-demo-case>

    <cells-demo-case heading="Inside form">
      <template>
        <h2>cells-button</h2>
        <div>
          <form action="https://www.bbva.es" id="formButton1">
            <input required type="text">
            <cells-button formtarget="_blank">Submit</cells-button>
          </form>
        </div>

        <div>
          <form action="https://bbva.com" id="formButton2">
            <input required type="text">
            <cells-button>Submit</cells-button>
          </form>
        </div>

        <div>
          <form action="" id="formButton3">
            <input required type="text">
            <cells-button form="formButton1" formtarget="_blank">Submit</cells-button>
          </form>
        </div>

        <h2>native button</h2>
        <div>
          <form action="https://bbva.es" id="formNative1" target="_self">
            <input required type="text">
            <button formtarget="_blank">Submit</button>
          </form>
        </div>

        <div>
          <form action="https://bbva.com" id="formNative2">
            <input required type="text">
            <button>Submit</button>
          </form>
        </div>

        <div>
          <form action="" id="formNative3">
            <input required type="text">
            <button form="formNative1" formtarget="_blank">Submit</button>
          </form>
        </div>

      </template>
    </cells-demo-case>

    <cells-demo-case heading="Custom button" description="cells-button can be extended to create buttons with custom styles and HTML. Be sure to include _button in render method to provide form compatibility">
      <template>
        <div>
          <custom-button id="cb1">Custom button</custom-button>
        </div>
        <div>
          <custom-button id="cb2" icon="coronita:close">Custom button</custom-button>
        </div>
        <div>
          <custom-button id="cb3" disabled>Disabled custom button</custom-button>
        </div>
        <div>
          <form action="https://www.bbva.es" id="formButton1">
            <input required type="text">
            <custom-button id="cb4" formtarget="_blank" formaction="http://platform.bbva.com">Submit</custom-button>
          </form>
        </div>

        <script type="module">
          const { html, css, CellsButton} = window.DemoHelpers;

          class CustomButton extends CellsButton {
            static get is() {
              return 'custom-button';
            }

            static get properties() {
              return {
                icon: {
                  type: String
                }
              };
            }

            constructor() {
              super();
              this.icon = 'coronita:account';
            }

            connectedCallback() {
              super.connectedCallback();
              this.addEventListener('click', () => {
                this.dispatchEvent(new CustomEvent('demo-button-event', {
                  bubbles: true,
                  composed: true,
                  detail: {
                    target: this.getAttribute('id')
                  }
                }));
              });
            }

            static get styles() {
              return [
                super.styles,
                css`
                  :host {
                    background-color: #004481;
                    border-radius: 4px;
                    border: none;
                    color: white;
                    outline: none;
                    padding: 0.5rem 1rem;
                  }

                  :host(:hover) {
                    background-color: #1973B8;
                  }

                  :host([focus-visible]) {
                    background-color: #1973B8;
                    outline: 3px dotted #1464A5;
                  }

                  :host([active]) {
                    background-color: #1464A5;
                  }

                  cells-icon {
                    margin-right: .5rem;
                  }

                  :host([disabled]) {
                    color: white;
                    opacity: .4;
                  }
                `
              ];
            }

            render() {
              return html`
                <cells-icon icon="${this.icon}"></cells-icon>
                <span>
                  <slot></slot>
                </span>
                ${this._button}
              `;
            }
          }

          customElements.define(CustomButton.is, CustomButton);
        </script>

      </template>
    </cells-demo-case>

  </cells-demo-helper>
</body>
</html>
