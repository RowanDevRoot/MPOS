/* eslint-disable babel/no-unused-expressions */
/* eslint-disable no-console */
import '../elements/bbva-core-dom-module.js';
import '../elements/bbva-core-custom-style.js';

if (!window.ShadyCSS || !window.ShadyCSS.ScopingShim) {
  console.warn('ScopingShim not detected. Be sure to add ShadyCSS ScopingShim to your app!');
}

export const setComponentSharedStyles = (id, styles) => {
  if (!styles.cssText) {
    throw new Error(
      'Value passed to "setComponentSharedStyles" function must be a "css" function result',
    );
  }
  const domModule = document.createElement('bbva-core-dom-module');
  domModule.modulesStyles[id]
    ? domModule.modulesStyles[id].push(styles)
    : (domModule.modulesStyles[id] = [styles]);
  domModule.register(id);
};

export const setDocumentCustomStyles = styles => {
  const customStyles = document.createElement('template');
  customStyles.setAttribute('style', 'display: none;');
  customStyles.innerHTML = `
  <bbva-core-custom-style>
    <style>
      ${styles.cssText}
    </style>
  </bbva-core-custom-style>
  `;
  document.head.appendChild(customStyles.content);
};
