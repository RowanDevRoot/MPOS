import { html, fixture, assert, fixtureCleanup } from '@open-wc/testing';

import '../bbva-notification-help.js';

suite('bbva-notification-help', () => {
  let el;
  let elementShadowRoot;

  teardown(() => fixtureCleanup());

  setup(async () => {
    el = await fixture(
      html`
        <bbva-notification-help></bbva-notification-help>
      `,
    );
    elementShadowRoot = el.shadowRoot;
    await el.updateComplete;
  });

  test('It renders text when its set', async () => {
    const text = elementShadowRoot.querySelector('.text-help');

    el.text = 'fake';
    await el.updateComplete;
    assert.equal(text.innerText.trim(), el.text);
  });

  test('It renders icon when its set', async () => {
    const icon = elementShadowRoot.querySelector('.icon-help');

    el.iconSize = 24;
    el.icon = 'fake';

    await el.updateComplete;
    assert.equal(icon.size, el.iconSize, 'iconSize is equal');
    assert.equal(icon.icon, el.icon, 'icon is equal');
  });

  test('a11y', () => assert.isAccessible(el));

  suite('Semantic Dom', () => {
    test('DOM - Structure test', () => {
      assert.dom.equalSnapshot(el);
    });

    test('SHADOW DOM - Structure test', () => {
      assert.shadowDom.equalSnapshot(el);
    });

    test('LIGHT DOM - Structure test', () => {
      assert.lightDom.equalSnapshot(el);
    });
  });
});
