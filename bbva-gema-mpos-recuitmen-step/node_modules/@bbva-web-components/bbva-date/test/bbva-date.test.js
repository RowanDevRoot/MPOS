import { html, fixture, assert, fixtureCleanup } from '@open-wc/testing';

import '../bbva-date.js';

suite('bbva-date', () => {
  teardown(() => fixtureCleanup());

  suite('bbva-date', () => {
    let el;

    setup(async () => {
      el = await fixture(html`
        <bbva-date date="December 17, 1995" locale="en-US"></bbva-date>
      `);
      await el.updateComplete;
    });

    test('a11y', () => assert.isAccessible(el));

    test('Date object is correctly created', async () => {
      const result = new Date('April 23, 1995');
      el.setAttribute('date', result.toDateString());
      await el.updateComplete;

      assert.equal(el.date.getTime(), result.getTime());
    });

    test('Semantic Dom', async () => {
      el.options = {
        day: 'numeric',
        month: '2-digit',
        year: 'numeric',
      };

      await el.updateComplete;

      assert.shadowDom.equalSnapshot(el);
    });

    suite('Semantic Dom', () => {
      test('DOM - Structure test', () => {
        assert.dom.equalSnapshot(el);
      });

      test('SHADOW DOM - Structure test', () => {
        assert.shadowDom.equalSnapshot(el);
      });

      test('LIGHT DOM - Structure test', () => {
        assert.lightDom.equalSnapshot(el);
      });
    });
  });

  suite('bbva-date empty date object', () => {
    let el;

    setup(async () => {
      el = await fixture(html`
        <bbva-date date="" locale="en-US"></bbva-date>
      `);
      await el.updateComplete;
    });

    test('a11y', () => assert.isAccessible(el));

    suite('Semantic Dom', () => {
      test('DOM - Structure test', () => {
        assert.dom.equalSnapshot(el);
      });

      test('SHADOW DOM - Structure test', () => {
        assert.shadowDom.equalSnapshot(el);
      });

      test('LIGHT DOM - Structure test', () => {
        assert.lightDom.equalSnapshot(el);
      });
    });
  });
});
